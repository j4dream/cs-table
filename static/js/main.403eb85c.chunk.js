(this["webpackJsonpvirtualized-sc-table"]=this["webpackJsonpvirtualized-sc-table"]||[]).push([[0],{22:function(e,t,r){e.exports=r(38)},27:function(e,t,r){},28:function(e,t,r){e.exports=r.p+"static/media/logo.5d5d9eef.svg"},29:function(e,t,r){},33:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),i=r.n(o),l=(r(27),r(2)),s=r(1),c=r(4),d=r(3),h=(r(28),r(29),r(6)),u=r(5),p=r(11),f=r.n(p),v=r(8);function m(){var e=document.createElement("div"),t=document.body||e;e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",t.appendChild(e);var r=e.offsetWidth,n=e.clientWidth;return t.removeChild(e),r-n}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=1;function r(e,n){if(n?(e.level=n.level+1,t<e.level&&(t=e.level)):e.level=1,e.children.length){var a=0;e.children.forEach((function(t){r(t,e),a+=t.colSpan})),e.colSpan=a}else e.colSpan=1}e.forEach((function(e){r(e)}));for(var n=[],a=0;a<t;a++)n.push([]);for(var o=[],i=e.slice(),l=0;i[l];l++)o.push(i[l]),i[l].children.length&&i.push.apply(i,Object(v.a)(i[l].children));return o.forEach((function(e){e.children.length?e.rowSpan=1:e.rowSpan=t-e.level+1,n[e.level-1].push(e)})),n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=1,r=0;function n(e,a){if(a?(e.level=a.level+1,t<e.level&&(t=e.level)):e.level=1,!(e.children.length>0))return e.rowSpan=1,r++;var o=0;e.children.forEach((function(t){n(t,e),o+=t.rowSpan})),e.rowSpan=o}e.forEach((function(e){n(e)}));for(var a=[],o=0;o<r;o++)a.push([]);for(var i={},l=1;l<=t;l++)i[l]=0;for(var s=[],c=e.slice(),d=0;c[d];d++)s.push(c[d]),c[d].children&&c.push.apply(c,Object(v.a)(c[d].children));return s.forEach((function(e){0===e.children.length?e.colSpan=t-e.level+1:e.colSpan=1})),s.forEach((function(e){var t=e.rowSpan,r=e.level,n=0;e.start=i[r],e.parent&&e.parent.start>e.start&&(n+=e.parent.start-e.start,e.start+=n),i[r]+=n,a[i[r]].push(e),i[r]+=t})),a}var b=0;function w(){return b++}var H="";function E(e,t){return H||["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].forEach((function(t){"function"===typeof e[t]&&(H=t)})),e[H](t)}var O=r(19),x=r.n(O),C=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={mouseDown:!1,dragging:!1},n.onMouseDown=n.onMouseDown.bind(Object(u.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(u.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(u.a)(n)),n}return Object(s.a)(r,[{key:"onMouseDown",value:function(e){if(0===e.button){var t=Object(o.findDOMNode)(this),r=this.props.handle;if(r&&!function(e,t,r){for(var n=e;n;){if(E(e,t))return!0;if(n===r)return!1;n=n.parentNode}return!1}(e.target,r,t))return;this.addEvent();var n=Object(o.findDOMNode)(this).getBoundingClientRect(),a=n.width,i=n.height,l=n.left,s=n.top;this.setState({mouseDown:!0,originX:e.pageX,originY:e.pageY,elementX:l,elementY:s,width:a,height:i})}}},{key:"onMouseMove",value:function(e){var t=this,r=e.pageX-this.state.originX,n=e.pageY-this.state.originY,a=Math.abs(r)+Math.abs(n);!this.state.dragging&&a>2&&(this.props.onDragStart&&this.props.onDragStart(this.props.dragData),this.state.dragging=!0),this.state.dragging&&this.setState((function(e){var a={},o=e.elementX+r+document.body.scrollLeft,i=e.elementY+n+document.body.scrollTop;return"none"===t.props.axis&&(a.left=o,a.top=i),"x"===t.props.axis&&(a.left=o,a.top=e.elementY),"y"===t.props.axis&&(a.left=e.elementX,a.top=i),a}))}},{key:"onMouseUp",value:function(){this.removeEvent();var e=this.props.onDragStop;this.state.dragging&&(e&&e(),this.setState({dragging:!1}))}},{key:"addEvent",value:function(){document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}},{key:"removeEvent",value:function(){document.onselectstart=null,document.ondragstart=null,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"style",value:function(){var e=this.state,t=e.dragging,r=e.left,n=e.top,a=e.width,o=e.height;return t?{position:"fixed",opacity:.6,left:r,top:n,width:a,height:o,zIndex:12}:{}}},{key:"render",value:function(){return a.a.createElement("div",{style:this.style(),className:this.props.className,onMouseDown:this.onMouseDown},this.props.children)}}]),r}(a.a.Component);C.defaultProps={axis:"none",handle:null};var j=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={style:{}},e.handleMouseDown=function(t){var r=e.props,n=r.column,a=r.type;if(e.draggingColumn){e.dragging=!0;for(var o=e.context.table,i=o.tableEl,l=o.colResizeProxy,s=o.rowResizeProxy,c=i.getBoundingClientRect(),d=c.left,h=c.top,u=t.target;u&&"TH"!==u.tagName;)u=u.parentNode;var p=u.getBoundingClientRect(),f=p.left-d+30,v=p.top-h+30,m=t.clientX,g=t.clientY,y=p.right-d;"hori"===e.direction&&(l.style.visibility="visible",l.style.left=y+"px");var b=p.bottom-h;"vert"===e.direction&&(s.style.visibility="visible",s.style.top=b+"px"),document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var w=function(e){var t=e.clientX-m,r=y+t;l.style.left=Math.max(f,r)+"px";var n=e.clientY-g,a=b+n;s.style.top=Math.max(v,a)+"px"};document.addEventListener("mousemove",w),document.addEventListener("mouseup",(function t(r){if(e.dragging){if("hori"===e.direction){var o,i=r.clientX-m;if("col"===a&&(o=e.headerTree.getLastNode(n)),"row"===a){var c=n.level-1;o=e.headerTree.getDeepestNodeByIndex(c)}if("corner"===a)o=e.context.table.rowHeaderTree.getDeepestNodeByIndex();var d=(o.width||o.realWidth||o.minWidth)+i;o.width=d<80?80:d,o.realWidth=o.width}if("vert"===e.direction){var h,u=r.clientY-g;if("col"===a){var p=n.level+n.rowSpan-2;h=e.headerTree.getDeepestNodeByIndex(p)}if("row"===a&&(h=e.headerTree.getLastNode(n)),"corner"===a)h=e.context.table.colHeaderTree.getDeepestNodeByIndex();var f=h.height+u;h.height=f<30?30:f}e.dragging=!1,e.draggingColumn=null,document.body.style.cursor="",l.style.visibility="hidden",s.style.visibility="hidden",document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",t),document.onselectstart=null,document.ondragstart=null,e.context.table.onLayoutChange(),e.context.table.scheduleLayout()}}))}},e.handleMouseMove=function(t){var r=e.props.column;if(!e.headerTree.sortingColumn&&!e.dragging){for(var n=t.target;n&&"TH"!==n.tagName;)n=n.parentNode;var a=n.getBoundingClientRect(),o=document.body.style;if(a.width>12&&a.right-t.pageX<5){if(e.disableResizeCol)return;o.cursor="col-resize",e.draggingColumn=r,e.direction="hori"}else if(a.height>12&&a.bottom-t.clientY<5){if(e.disableResizeRow)return;o.cursor="row-resize",e.direction="vert",e.draggingColumn=r}else o.cursor="",e.draggingColumn=null,e.direction=null}},e.handleMouseOut=function(){document.body.style.cursor=""},e.onMouseEnter=function(){var t=e.props,r=t.column,n=t.type,a=e.context.table,o=a.colHeaderTree,i=a.rowHeaderTree;"col"===n?(o.sortingColumn&&o.sortSameLevelPos(r)&&e.context.table.refreshColumn(),o.sortingColumn=null):(i.sortingColumn&&i.sortSameLevelPos(r)&&e.context.table.refreshColumn(),i.sortingColumn=null)},e.handleSortStart=function(){var t=e.props,r=t.column,n=t.type,a=e.context.table,o=a.colHeaderTree,i=a.rowHeaderTree;"col"===n?o.sortingColumn=r:i.sortingColumn=r},e.handleSortStop=function(){setTimeout((function(){var t=e.context.table,r=t.colHeaderTree,n=t.rowHeaderTree;r.sortingColumn=null,n.sortingColumn=null}),200)},e}return Object(s.a)(r,[{key:"dispatchEvent",value:function(e){for(var t=this.props[e],r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t&&t.apply(void 0,n)}},{key:"getEextraProps",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.column,r=e.type,n=this.state.style,o=t.colSpan,i=t.rowSpan,l=t.name,s=t.children,c=this.context.table.props.sortSameLevelColumn;return a.a.createElement("th",{colSpan:o,rowSpan:i,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown,onMouseEnter:this.onMouseEnter,className:x()({leaf:!s}),height:t.computedHeight(),style:n},c?a.a.createElement(C,{handle:".icon",axis:"col"===r?"x":"y",onDragStart:this.handleSortStart,onDragStop:this.handleSortStop},a.a.createElement("div",{className:"cell exchange"},a.a.createElement("div",{className:"icon ".concat("col"===r?"x":"y")}),l)):a.a.createElement("div",{className:"cell"},l))}},{key:"headerTree",get:function(){var e=this.props.type;return"row"===e?this.context.table.rowHeaderTree:"col"===e?this.context.table.colHeaderTree:{}}},{key:"disableResizeCol",get:function(){return!this.context.table.props.resizeWidth}},{key:"disableResizeRow",get:function(){return!this.context.table.props.resizeHeight}}]),r}(a.a.Component);j.contextTypes={table:f.a.any};var W=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"getColWidth",value:function(e){return e>100?e:100}},{key:"render",value:function(){var e=this,t=this.props,r=t.colHeaderWidth,n=t.store,o=n.columnHeader;return a.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",style:{borderBottom:0,width:r}},a.a.createElement("colgroup",null,n.columns.map((function(e){var t=e.realWidth,r=e.prop;return a.a.createElement("col",{width:t,style:{width:t},key:r})}))),a.a.createElement("thead",null,o.map((function(t){return a.a.createElement("tr",{key:w()},t.map((function(e){return a.a.createElement(j,{type:"col",column:e,key:e.prop})})),a.a.createElement("th",{className:"gutter-col",style:{width:e.gutterWidth}}))}))))}},{key:"gutterWidth",get:function(){var e=this.props.store,t=e.forceHideYGutter,r=e.scrollY,n=e.gutterWidth;return t||!r?0:n}}]),r}(a.a.Component),S=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.store,r=e.tree,n=t.rowTableColGroup,o=t.rowHeader,i=t.rowHeaderWidth;return a.a.createElement("table",{border:"0",cellSpacing:"0",style:{width:i}},a.a.createElement("colgroup",null,n.map((function(e){var t=e.realWidth,r=e.key;return a.a.createElement("col",{width:t,style:{realWidth:t},key:r})}))),a.a.createElement("thead",null,o.map((function(e){return a.a.createElement("tr",{key:w()},e.map((function(e){return a.a.createElement(j,{type:"row",column:e,key:w()})})))})),t.scrollX&&a.a.createElement("tr",null,a.a.createElement("th",{className:"gutter-row",colSpan:r.deepestNodePath.length,height:"17"}))))}}]),r}(a.a.Component),k=r(20),N=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={recordsInView:[],offsetIndex:0},n.lazyRenderRows=Object(k.throttle)(500,n.lazyRenderRows),n}return Object(s.a)(r,[{key:"getCellHeight",value:function(e){var t=this.props,r=t.showRowHeader,n=t.store.rowGroup;return r&&n&&n.length?n[e].computedHeight()-1:30}},{key:"getMapData",value:function(){var e=this,t=this.props.store,r=t.rowGroup,n=t.data,o=t.columns;return this.props.isNoData?a.a.createElement("tr",null):r.map((function(t,r){return a.a.createElement("tr",{key:w()},o.map((function(o){return a.a.createElement("td",{key:w()},a.a.createElement("div",{className:"cell",style:{height:e.getCellHeight(r)}},n[t.prop]&&n[t.prop][o.prop]))})))}))}},{key:"getLazyData",value:function(){var e=this,t=this.props,r=t.store,n=t.isNoData,o=this.state.recordsInView;return n?a.a.createElement("tr",null):o.map((function(t,n){return a.a.createElement("tr",{key:w()},r.columns.map((function(r){return a.a.createElement("td",{key:w()},a.a.createElement("div",{className:"cell",style:{height:e.getCellHeight(n)}},t&&t[r.prop]))})))}))}},{key:"lazyRenderRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props.store,r=t.rowGroup,n=t.data;if(r.length){for(var a=[],o=0;o<this.props.rowsInView;o++){var i=r[e+o];if(i){var l=i.prop,s=n[l];a.push(s)}}this.setState({recordsInView:a,offsetIndex:e})}}},{key:"render",value:function(){var e=this.props,t=e.colHeaderWidth,r=e.store,n=e.lazyLoading,o=e.isNoData,i=this.state.offsetIndex;return n?a.a.createElement("div",{style:{height:o?0:30*this.rows}},a.a.createElement("table",{border:"0",cellSpacing:"0",style:{width:t-(r.scrollY?r.gutterWidth:0),transform:"translate(0, ".concat(30*i,"px)")},className:"dc-table-real-body"},a.a.createElement("colgroup",null,r.columns.map((function(e,t){return a.a.createElement("col",{width:e.realWidth,style:{width:e.realWidth},key:e.prop})}))),a.a.createElement("tbody",null,this.getLazyData()))):a.a.createElement("table",{border:"0",cellSpacing:"0",style:{width:t-(r.scrollY?r.gutterWidth:0)},className:"dc-table-real-body"},a.a.createElement("colgroup",null,r.columns.map((function(e,t){return a.a.createElement("col",{width:e.realWidth,style:{width:e.realWidth},key:e.prop})}))),a.a.createElement("tbody",null,this.getMapData()))}},{key:"rows",get:function(){return this.props.store.rowGroup.length}}]),r}(a.a.Component);N.defaultProps={rowsInView:20};var R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t.children,t.name),n=t.prop,a=t.field,o=t.width,i=t.height,s=void 0===i?40:i;Object(l.a)(this,e),this.parent=null,this.children=[],this.data=null,this.key=null,this.level=null,this.colSpan=0,this.rowSpan=0,this.width=null,this.height=0,this.minHeight=30,this.minWidth=80,this.realWidth=80,this.prop=null,this.field=null,this.name="",this.name=r,this.prop=n||a,this.width=o,this.realWidth=o,this.height=s,this.key=w()}return Object(s.a)(e,[{key:"addChild",value:function(e){this.children.push(e)}},{key:"computedHeight",value:function(){return this.height||this.minHeight}},{key:"clear",value:function(){this.parent=void 0,this.data=void 0,this.key=void 0,this.colSpan=void 0,this.rowSpan=void 0,this.width=void 0,this.height=void 0,this.minHeight=void 0,this.minWidth=void 0,this.realWidth=void 0,this.field=void 0,this.name=void 0,this.start=void 0}}]),e}(),Q=r(14),M=r.n(Q),L=r(21),T=r.n(L),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(l.a)(this,e),this.children=[],this.deepestNodePath=[],this.leafNodes=[],this.setting={},this.sorting=[],this.root=new R,this.sortingColumn=null,this.setting=r,this.sorting=n,this.buildTree(t)}return Object(s.a)(e,[{key:"buildTree",value:function(e){this._initTree(e),this.deepestNodePath=this._findDeepestNodePath(),this.leafNodes=this.getLeafNodes()}},{key:"_traverse",value:function(e,t){var r=this,n=e.prop,a=e.field,o=this.setting[n]||this.setting[a];o&&Object.assign(e,o);var i=new R(e);t&&(i.parent=t,t.addChild(i)),e.children&&e.children.forEach((function(e){r._traverse(e,i)}))}},{key:"_initTree",value:function(e){var t=this,r=(new Date).getTime();if(this.sorting){var n={children:M()(e),prop:"root"},a={children:e,prop:"root"},o={children:this.sorting,prop:"root"};this.traverseDF((function(e){var r=e.prop,n=t.getNodeByProp(r,a),i=t.getNodeByProp(r,o);i&&t.soredNodesWidthSeq(n.children,i.children)}),n)}var i=(new Date).getTime();console.log("used time: ",i-r),e.forEach((function(e){t._traverse(e,t.root)}))}},{key:"soredNodesWidthSeq",value:function(e,t){t.forEach((function(t){var r=T()(e,(function(e){return e.prop===t.prop}));r.length&&e.push(r[0])}))}},{key:"_findDeepestNodePath",value:function(){for(var e=this.getBFSNodes(),t=e[e.length-1],r=[];t&&t.parent;)r.unshift(t),t=t.parent;return r}},{key:"getBFSNodes",value:function(){for(var e=[],t=this.root.children.slice(),r=0;t[r];r++)e.push(t[r]),t[r].children&&t.push.apply(t,Object(v.a)(t[r].children));return e}},{key:"getNodeByProp",value:function(e,t){var r=null;return this.traverseDF((function(t){if(t.prop===e)return r=t,!0}),t),r}},{key:"getDFSNodes",value:function(){var e=M()(this.root);return this.traverseDF((function(e){e.clear()}),e),e.children}},{key:"traverseDF",value:function(e,t){var r=t||this.root;if(r){!function t(r){if(!e(r)&&r.children)for(var n=0;n<r.children.length;n++)t(r.children[n])}(r)}}},{key:"getLeafNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.children,r=[];return t.forEach((function(t){t.children&&t.children.length?r.push.apply(r,Object(v.a)(e.getLeafNodes(t.children))):r.push(t)})),r}},{key:"getLastNode",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,t=arguments.length>1?arguments[1]:void 0,r=e;r&&r.children.length;){var n=r.children.length;r=r.children[n-1],t&&t(r)}return r}},{key:"getDeepestNodeByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.deepestNodePath.length-1;return this.deepestNodePath[e]}},{key:"sortSameLevelPos",value:function(e){if(this.sortingColumn&&this.sortingColumn.level!==e.level)return!1;var t=this.sortingColumn.parent;if(t!==e.parent)return!1;var r=t.children.indexOf(this.sortingColumn),n=t.children.indexOf(e);return t.children.splice(r,1),t.children.splice(n,0,this.sortingColumn),this.leafNodes=this.getLeafNodes(),!0}}]),e}(),z=(r(33),r(15)),B=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(e){var n;Object(l.a)(this,r),(n=t.call(this,e)).state={columns:[],rowGroup:[],rowTableColGroup:[],data:[],layout:{},rowHeaderWidth:0,colHeaderHeight:0,bodyWrapperHeight:0,columnHeader:[],rowHeader:[],gutterWidth:m(),scrollX:null,scrollY:null,forceHideYGutter:!1,lazyLoading:!1},n.handleScroll=function(){var e=Object(u.a)(n),t=e.bodyWrapper,r=e.colHeaderWrapper,a=e.rowHeaderWrapper,o=e.showRowHeader,i=e.tableBody;n.showColumnHeader&&(r.scrollLeft=t.scrollLeft),o&&(a.scrollTop=t.scrollTop),n.state.lazyLoading&&i.lazyRenderRows(n.lazyStartIndex)};var a=e.columnHeader,o=e.rowHeader,i=e.setting||{},s=i.r,c=i.c,d=i.co;return n.colHeaderTree=new D(a,c,d),n.rowHeaderTree=new D(o,s),n.cornerNode=new R({name:""}),n}return Object(s.a)(r,[{key:"getChildContext",value:function(){return{table:this}}}]),Object(s.a)(r,[{key:"bindRef",value:function(e){var t=this;return function(r){t[e]=r}}},{key:"scheduleLayout",value:function(){var e=this;this.calculateWidth(),this.forceUpdate((function(){e.calculateHeight(),e.updateScrollY(),e.state.lazyLoading&&e.tableBody.lazyRenderRows(e.lazyStartIndex)}))}},{key:"componentWillUpdate",value:function(){console.log("will update table")}},{key:"calculateWidth",value:function(){var e=this.state,t=e.columns,r=e.rowTableColGroup,n=e.gutterWidth,a=t.reduce((function(e,t){return e+(t.width||t.minWidth)}),0),o=this.tableEl.clientWidth;if(this.showRowHeader){var i=r.reduce((function(e,t){return e+(t.width||t.minWidth)}),0);this.state.rowHeaderWidth=i}else this.state.rowHeaderWidth=0;var l,s=t.filter((function(e){return"number"!==typeof e.width})),c=o-this.state.rowHeaderWidth;if(s.length)if(a<c-n){l=!1;var d=c-n-a;if(d>0)if(1===s.length)s[0].realWidth=s[0].minWidth+d;else{var h=d/s.reduce((function(e,t){return e+t.minWidth}),0),u=0;s.forEach((function(e,t){if(0!==t){var r=Math.floor(e.minWidth*h);u+=r,e.realWidth=e.minWidth+r}})),s[0].realWidth=s[0].minWidth+d-u}}else l=!0,s.forEach((function(e){e.realWidth=e.minWidth}));else l=a>c,t.forEach((function(e){return e.realWidth=e.width||e.minWidth})),c=a;this.state.colHeaderWidth=Math.max(a,c),this.state.scrollX=l,this.state.forceHideYGutter=this.state.colHeaderWidth<o-this.state.rowHeaderWidth}},{key:"calculateHeight",value:function(){var e=this;this.setState((function(t){var r,n=e.colHeaderWrapper;r=e.props.showColumnHeader?n.clientHeight:0;var a=e.props,o=a.height,i=a.maxHeight,l="100%";return o&&Object(z.isNumber)(o)&&(l=e.props.height-r),i&&Object(z.isNumber)(i)&&(l=e.props.maxHeight-r),e.cornerNode.height=r,{colHeaderHeight:r,bodyWrapperHeight:l}}))}},{key:"updateScrollY",value:function(){var e=this;this.setState((function(t){return{scrollY:e.bodyWrapper.querySelector(".dc-table-real-body").clientHeight>t.bodyWrapperHeight}}))}},{key:"getConfig",value:function(){var e=this.rowHeaderTree,t=this.colHeaderTree,r=this.props,n=this.tableWidth,a=r.height,o={},i={};return t.deepestNodePath.forEach((function(e){var t=e.prop,r=e.height,n=o[t];n||(n={}),n.height=r,o[t]=n})),t.leafNodes.forEach((function(e){var t=e.prop,r=e.width,n=o[t];n||(n={}),n.width=r,o[t]=n})),e.deepestNodePath.forEach((function(e){var t=e.prop,r=e.width,n=i[t];n||(n={}),n.width=r,i[t]=n})),e.leafNodes.forEach((function(e){var t=e.prop,r=e.height,n=i[t];n||(n={}),n.height=r,i[t]=n})),{w:n,h:a,c:o,co:t.getDFSNodes(),ro:e.getDFSNodes(),r:i}}},{key:"safeCallLayoutChange",value:function(){this.props.onLayoutChange&&this.props.onLayoutChange(this.getConfig())}},{key:"onLayoutChange",value:function(){this.scheduleLayout(),this.safeCallLayoutChange()}},{key:"refreshColumn",value:function(){var e=this,t=this.colHeaderTree.leafNodes,r=this.rowHeaderTree.leafNodes,n=g(this.colHeaderTree.root.children),a=y(this.rowHeaderTree.root.children);this.setState({columns:t,rowGroup:r,columnHeader:n,rowHeader:a},(function(){e.safeCallLayoutChange(),e.state.lazyLoading&&e.tableBody.lazyRenderRows(e.lazyStartIndex)}))}},{key:"refreshTable",value:function(e){var t=this.colHeaderTree.leafNodes,r=this.rowHeaderTree.leafNodes,n=this.rowHeaderTree.deepestNodePath,a=g(this.colHeaderTree.root.children),o=y(this.rowHeaderTree.root.children),i=!1;r.length*t.length>3e3&&(i=!0),this.setState({columns:t,rowGroup:r,rowTableColGroup:n,columnHeader:a,rowHeader:o,data:e,lazyLoading:i},this.scheduleLayout)}},{key:"componentDidMount",value:function(){var e=this.props.data;this.refreshTable(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.columnHeader,r=e.rowHeader,n=e.data,a=e.setting;if(this.props.columnHeader!==t||this.props.rowHeader!==r||this.props.data!==n){var o=a||{},i=o.r,l=o.c,s=o.co,c=o.ro;this.colHeaderTree=new D(t,l,s),this.rowHeaderTree=new D(r,i,c),this.refreshTable(n)}}},{key:"render",value:function(){var e=this.state,t=e.rowHeaderWidth,r=e.colHeaderWidth,n=e.colHeaderHeight,o=this.props.className;return a.a.createElement("div",{ref:this.bindRef("tableEl"),className:"dc-table ".concat(o),style:Object.assign({width:this.tableWidth,overflow:"hidden"},this.tableHeight)},a.a.createElement("div",{style:{marginLeft:t},ref:this.bindRef("colBodyWrapper")},this.showColumnHeader&&a.a.createElement("div",{ref:this.bindRef("colHeaderWrapper"),className:"col-header-wrapper"},a.a.createElement(W,Object.assign({},this.props,{store:this.state,colHeaderWidth:r}))),a.a.createElement("div",{ref:this.bindRef("bodyWrapper"),style:this.bodyHeightOrMaxHeight,className:"body-wrapper",onScroll:this.handleScroll},a.a.createElement(N,Object.assign({ref:this.bindRef("tableBody")},this.props,{lazyLoading:this.state.lazyLoading,store:this.state,colHeaderWidth:r,rowsInView:Math.ceil(this.props.maxHeight/30),isNoData:this.isNoData})),this.isNoData&&a.a.createElement("div",{style:this.bodyHeightOrMaxHeight,className:"nodata-block"},a.a.createElement("div",{className:"nodata-text"},"No Data")))),this.showRowHeader&&a.a.createElement("div",{className:"row-header-wrapper",ref:this.bindRef("rowHeaderWrapper"),style:Object(h.a)({marginTop:n},this.bodyHeightOrMaxHeight)},a.a.createElement(S,Object.assign({},this.props,{store:this.state,tree:this.rowHeaderTree}))),this.showCorner&&a.a.createElement("div",{className:"corner-block",style:{width:t,height:n}},a.a.createElement("table",{border:"0",cellSpacing:"0",width:"100%"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(j,{type:"corner",column:this.cornerNode}))))),a.a.createElement("div",{className:"dc-table-col-resize-proxy",ref:this.bindRef("colResizeProxy"),style:{visibility:"hidden"}}),a.a.createElement("div",{className:"dc-table-row-resize-proxy",ref:this.bindRef("rowResizeProxy"),style:{visibility:"hidden"}}))}},{key:"lazyStartIndex",get:function(){return Math.floor(this.bodyWrapper.scrollTop/30)}},{key:"tableWidth",get:function(){var e=this.props.width;return e>200?e:"100%"}},{key:"tableHeight",get:function(){var e=this.props,t=e.height,r=e.maxHeight,n={};return t?n.height=t||"":r&&(n.maxHeight=r),n}},{key:"bodyHeightOrMaxHeight",get:function(){var e=this.props,t=e.height,r=e.maxHeight,n=this.state.bodyWrapperHeight,a={};return t?a.height=n||"":r&&(a.maxHeight=n),a}},{key:"showCorner",get:function(){var e=this.props,t=e.showColumnHeader,r=e.showRowHeader,n=this.state,a=n.columns,o=n.rowGroup;return t&&r&&Boolean(a.length)&&Boolean(o.length)}},{key:"showRowHeader",get:function(){var e=this.props.showRowHeader,t=this.state.rowGroup;return e&&Boolean(t.length)}},{key:"showColumnHeader",get:function(){return this.props.showColumnHeader}},{key:"isNoData",get:function(){var e=this.state.data;return(!Array.isArray(e)||!e.length)&&!Object.keys(e).length}}]),r}(a.a.Component);B.defaultProps={border:1,width:100,setting:{},resizeWidth:!0,resizeHeight:!0,showColumnHeader:!0,showRowHeader:!0,sortSameLevelColumn:!1,useMapData:!1,data:[],columnHeader:[],rowHeader:[],className:""},B.childContextTypes={table:f.a.any};var P={rowHeader:[{name:"\u670d\u88c5",prop:"a",children:[{name:"\u4e0a\u8863",prop:"0",children:[]},{name:"\u5e3d\u5b50",prop:"1",children:[]},{name:"\u88e4\u5b50",prop:"2",children:[]},{prop:"3",name:"\u978b\u5b50",children:[]}]},{name:"\u7535\u5668",prop:"b",children:[{prop:"4",name:"\u51b0\u7bb1",children:[]},{prop:"5",name:"\u7535\u89c6",children:[]},{prop:"6",name:"\u7a7a\u8c03",children:[]},{name:"\u98ce\u6247",prop:"7",children:[]}]}],columnHeader:[{name:"2,018",prop:"2018",children:[{name:"Q1",prop:"2018-Q1",children:[]},{name:"Q2",prop:"2018-Q2",children:[]},{name:"Q3",prop:"2018-Q3",children:[]},{name:"Q4",prop:"2018-Q4",children:[]}]},{name:"2,019",prop:"2019",children:[{name:"Q1",prop:"2019-Q1",children:[]},{name:"Q2",prop:"2019-Q2",children:[]},{name:"Q3",prop:"2019-Q3",children:[]},{name:"Q4",prop:"2019-Q4",children:[]}]}],data:{0:{"2018-Q1":1,"2018-Q2":2,"2018-Q3":3,"2018-Q4":4,"2019-Q1":5,"2019-Q2":6,"2019-Q3":7,"2019-Q4":8},1:{"2018-Q1":2,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},2:{"2018-Q1":3,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},3:{"2018-Q1":4,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},4:{"2018-Q1":5,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},5:{"2018-Q1":6,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},6:{"2018-Q1":7,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945},7:{"2018-Q1":8,"2018-Q2":3244,"2018-Q3":4903,"2018-Q4":8903,"2019-Q1":5423,"2019-Q2":4567,"2019-Q3":8976,"2019-Q4":1945}}},I=r(7),Y=function(){var e=Object(n.useContext)(V),t=e.renderCell,r=e.cellWidth,o=void 0===r?120:r,i=e.cellHeight,l=void 0===i?40:i,s=e.dataAreaState,c=s.processedHeader,d=s.processedData,h=s.rowStartIndex;return d.map((function(e,r){return c.map((function(e,n){return a.a.createElement("div",{className:"cell",key:"d-a-".concat(r,"-").concat(n),style:{position:"absolute",top:(r+h)*l,left:e.left,width:e.width||o,height:l}},e.renderCell?e.renderCell(d[r][e.prop],r+h,e.prop,e):t(d[r][e.prop],r+h,e.prop,e))}))}))};function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.reduce((function(e,r){return r.left=e,(r.width||t)+e}),0);return r?n:e}var X=function(){return!1},G=function(){var e=Object(n.useContext)(V),t=e.cellWidth,r=e.cellHeight,o=e.renderHeader,i=e.dataAreaState,l=e.setDataAreaState,s=e.tableRef,c=e.colResizeProxyRef,d=e.header,u=e.enableResize,p=Object(n.useRef)(!1),f=Object(n.useRef)(),v=Object(n.useRef)(),m=i.processedHeader,g=Object(n.useCallback)((function(e){if(!p.current){var t=e.currentTarget,r=t.getBoundingClientRect(),n=document.body.style;r.right-e.pageX<5?(n.cursor="col-resize",f.current=t.dataset.prop):n.cursor=""}}),[]),y=Object(n.useCallback)((function(){document.body.style.cursor=""}),[]),b=Object(n.useCallback)((function(e){var t=e.clientX-s.current.getBoundingClientRect().left;c.current.style.left=t+"px",document.body.style.cursor="col-resize"}),[c,s]),w=Object(n.useCallback)((function(e){c.current.style.visibility="hidden",document.body.style.cursor="",document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),p.current=!1,document.onselectstart=null,document.ondragstart=null;var r=e.clientX-v.current,n=m.find((function(e){return e.prop===f.current}));if(n){n.width=Math.max((n.width||t)+r,30);var a=A(d,t,!0);l((function(e){return Object(h.a)({},e,{dataAreaWidth:a})}))}}),[t,c,b,m,l,d]),H=Object(n.useCallback)((function(e){if(f.current){p.current=!0;var t=e.currentTarget,r=s.current.getBoundingClientRect().left,n=t.getBoundingClientRect().right-r;c.current.style.visibility="visible",c.current.style.left=n+"px",v.current=t.getBoundingClientRect().right,document.onselectstart=X,document.ondragstart=X,document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)}}),[c,b,w,s]),E=Object(n.useMemo)((function(){return u?{onMouseMove:g,onMouseOut:y,onMouseDown:H}:{}}),[u,g,y,H]);return m.map((function(e,n){return a.a.createElement("div",Object.assign({key:"h-".concat(n),className:"header",style:{position:"absolute",width:e.width||t,height:r,left:e.left},"data-prop":e.prop},E),e.renderHeader?e.renderHeader(e,e.prop):o(e,e.prop))}))},F=(r(37),function(){var e=Object(n.useContext)(V),t=e.cellWidth,r=e.cellHeight,o=e.dataAreaState,i=e.renderCell,l=o.processedData,s=o.rowStartIndex,c=o.fixedLeftCol;return l.map((function(e,n){return c.map((function(e,o){return a.a.createElement("div",{className:"cell fixed-left",key:"f-c-".concat(n,"-").concat(o),style:{position:"absolute",top:(n+s)*r,left:e.left,width:e.width||t,height:r}},e.renderCell?e.renderCell(l[n][e.prop],n+s,e.prop,e):i(l[n][e.prop],n+s,e.prop,e))}))}))}),U=function(){var e=Object(n.useContext)(V),t=e.cellWidth,r=e.cellHeight,o=e.dataAreaState,i=e.renderHeader;return o.fixedLeftCol.map((function(e,n){return a.a.createElement("div",{key:"f-h-".concat(n),className:"header",style:{position:"absolute",left:e.left,width:e.width||t,height:r}},e.renderHeader?e.renderHeader(e,e.prop):i(e,e.prop))}))};function _(){var e=Object(n.useContext)(V),t=e.header,r=e.data,o=e.scrollBarWidth,i=e.height,l=void 0===i?440:i,s=e.cellWidth,c=void 0===s?120:s,d=e.cellHeight,h=void 0===d?40:d,u=e.handleScroll,p=e.dataAreaRef,f=e.headerRef,v=e.fixedColLeftRef,m=e.colResizeProxyRef,g=e.tableRef,y=e.fixedLeftColWidth,b=e.preventScroll,w=e.enableResize,H=void 0===w||w,E=e.dataAreaState.dataAreaWidth,O=r.length,x=t.length,C=Object(n.useMemo)((function(){return H?t.reduce((function(e,t){return e+(t.width||c)}),0):x*c}),[H,t,x,c]),j=Object(n.useMemo)((function(){return O*h}),[O,h]);return a.a.createElement("div",{ref:g,className:"cs-table",style:{position:"relative",height:l}},b&&a.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2}}),a.a.createElement("div",{ref:f,style:{overflow:"hidden",marginLeft:y}},a.a.createElement("div",{style:{width:(E||C)+o,position:"relative",height:h}},a.a.createElement(G,null))),!!y&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"absolute",width:y,top:0}},a.a.createElement(U,null)),a.a.createElement("div",{ref:v,style:{overflow:"hidden",height:l-h,width:y,position:"absolute",left:0}},a.a.createElement("div",{style:{height:j+o}},a.a.createElement(F,null)))),a.a.createElement("div",{ref:p,style:{position:"relative",overflow:"auto",marginLeft:y,height:l-h},onScroll:u},a.a.createElement("div",{style:{height:j,width:E||C}},a.a.createElement(Y,null))),a.a.createElement("div",{className:"resize-col-proxy",ref:m,style:{visibility:"hidden"}}))}for(var V=a.a.createContext({}),q=function(e,t,r){for(var n=[],a=0;a<=r;a++){var o=e[t+a];o&&n.push(o)}return n},J=function(e){var t=e.header,r=e.data,o=e.height,i=void 0===o?440:o,l=e.cellWidth,s=void 0===l?120:l,c=e.cellHeight,d=void 0===c?40:c,u=e.renderCell,p=void 0===u?function(e,t,r){return e}:u,f=e.renderHeader,v=void 0===f?function(e,t){return e.label}:f,m=e.children,g=e.preventScroll,y=void 0!==g&&g,b=e.enableResize,w=void 0!==b&&b,H=Object(n.useRef)(),E=Object(n.useRef)(),O=Object(n.useRef)(),x=Object(n.useRef)(function(){var e=document.createElement("div"),t=document.body||e;e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",t.appendChild(e);var r=e.offsetWidth,n=e.clientWidth;return t.removeChild(e),r-n}()),C=Object(n.useRef)(),j=Object(n.useRef)(),W=Object(n.useMemo)((function(){return A(t.filter((function(e){return!e.fixed})),s)}),[t,s]),S=Object(n.useMemo)((function(){return A(t.filter((function(e){return e.fixed})),s)}),[t,s]),k=Object(n.useRef)();k.current=y;var N=Object(n.useMemo)((function(){return S.reduce((function(e,t){return e+(t.width||s)}),0)}),[S,s]),R=Object(n.useRef)(Math.ceil((document.body.offsetWidth-N)/s)),Q=Object(n.useRef)(Math.ceil(i/d)),M=Object(n.useState)((function(){return{processedHeader:q(W,0,R.current),processedData:q(r,0,Q.current),fixedLeftCol:S,rowStartIndex:0,colStartIndex:0}})),L=Object(I.a)(M,2),T=L[0],D=L[1];!function(e,t){var r=Object(n.useRef)(!1);Object(n.useEffect)((function(){if(r.current)return e();r.current=!0}),t)}((function(){D((function(e){var n=e.processedData,a=e.processedHeader,o=e.fixedLeftCol;return n!==r&&(e.processedData=q(r,0,Q.current)),a!==t&&(e.processedHeader=q(W,0,R.current)),o!==S&&(e.fixedLeftCol=S),Object(h.a)({},e)}))}),[r,W,S]);var z=Object(n.useRef)(0),B=Object(n.useRef)(0),P=Object(n.useCallback)((function(e){var t=e.currentTarget;if(t){var n,a,o=t.scrollLeft,i=t.scrollTop,l=t.offsetWidth,c=t.offsetHeight;if(w){var u=function(e,t,r,n){for(var a=0,o=0,i=e.length-1,l=t+r,s=0;s<e.length;s++)if((a+=e[s].width||n)<t&&(o=s),a>l){i=s;break}return{startIndex:o,count:i-o+1}}(W,o,H.current.offsetWidth,s),p=u.startIndex,f=u.count;n=p,a=f}else n=Math.floor(o/s),a=Math.ceil(l/s);var v=Math.floor(i/d),m=Math.ceil(c/d);if(E.current&&(E.current.scrollLeft=o),O.current&&(O.current.scrollTop=i),z.current!==n||B.current!==v){z.current=n,B.current=v;var g=q(W,n,a),y=q(r,v,m);D((function(e){return Object(h.a)({},e,{processedHeader:g,processedData:y,colStartIndex:n,rowStartIndex:v})}))}}}),[W,r,s,d,H,w]),Y={header:W,data:r,height:i,scrollBarWidth:x.current,cellWidth:s,cellHeight:d,dataAreaRef:H,headerRef:E,fixedColLeftRef:O,colResizeProxyRef:C,tableRef:j,handleScroll:P,dataAreaState:T,fixedLeftColWidth:N,setDataAreaState:D,preventScroll:k.current,renderCell:p,renderHeader:v,enableResize:w};return a.a.createElement(V.Provider,{value:Y},m)},$=a.a.memo((function(e){return a.a.createElement(J,e,a.a.createElement(_,null))})),K=[{label:"Operation",fixed:!0,prop:"op",width:90,renderHeader:function(e,t){return a.a.createElement("a",{href:"#"},"Operation")},renderCell:function(){return a.a.createElement("a",{href:"#"},"OP")}},{label:"Email (Fixed)",fixed:!0,prop:"email"}],Z=0;Z<200;Z++)K.push({label:"H ".concat(Z),prop:"".concat(Z)});for(var ee=[],te=0;te<1e4;te++){for(var re={},ne=0;ne<200;ne++)re[ne]="data ".concat(te,":").concat(ne);re.email="test_".concat(te,"@email.com"),ee.push(re)}var ae=Object(n.memo)((function(){var e=Object(n.useState)(0),t=Object(I.a)(e,2),r=(t[0],t[1],Object(n.useState)(K)),o=Object(I.a)(r,2),i=o[0],l=(o[1],Object(n.useState)(ee)),s=Object(I.a)(l,2),c=s[0],d=(s[1],Object(n.useState)(!1)),h=Object(I.a)(d,2),u=h[0];h[1];return a.a.createElement("div",null,a.a.createElement("p",{style:{margin:23}}," 200 * 10000 (col * row)"),a.a.createElement($,{header:i,data:c,cellWidth:200,preventScroll:u,enableResize:!0}))})),oe=function(e){Object(c.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={rowHeader:P.rowHeader,columnHeader:P.columnHeader,data:P.data},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state;e.columnHeader,e.rowHeader,e.data;return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"High performance table"),a.a.createElement("div",{style:{margin:15}},a.a.createElement(ae,null)))}}]),r}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.403eb85c.chunk.js.map